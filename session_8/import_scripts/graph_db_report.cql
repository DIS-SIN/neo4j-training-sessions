////////////////////////////////////////////////////////////////////////
//
// Create a snapshot report
//
// Note: This script will be processed by neo4j-shell utility
// All comments in Java Style: line preceded by //
// Its syntax must be list of cypher queries and neo4j-shell commands
// separated by ';'
//
////////////////////////////////////////////////////////////////////////

////////////////////////////////////////////////////////////////////////
//
// 1. Node report
//
MATCH (n)
  RETURN DISTINCT(LABELS(n)[0]) AS node_label, COUNT(n) AS count
    ORDER BY node_label, count DESC;
//
////////////////////////////////////////////////////////////////////////

////////////////////////////////////////////////////////////////////////
//
// 2. Relationship report
//
MATCH (s)-[r]->(e)
  RETURN DISTINCT([LABELS(s)[0], TYPE(r), LABELS(e)[0]]) AS rel_type, COUNT(r) AS count
    ORDER BY rel_type, count DESC;
//
////////////////////////////////////////////////////////////////////////
